language: rust
cache:
  cargo: true
  yarn: true
  directories:
    - binaryen
    - node_modules
before_install:
    - curl -o- -L https://yarnpkg.com/install.sh | bash
    - curl -o- https://raw.githubusercontent.com/creationix/nvm/v0.34.0/install.sh | bash
    - export PATH=$HOME/.yarn/bin:$(yarn global bin):$PATH  
script:
    - ./build.sh
    - ./test-rust.sh
    - ./test-js.sh
